---
openapi: 3.0.1
info:
  title: Mammal Microservice
  version: 0.0.1
externalDocs:
  description: github
  url: https://github.com/fakenamespace/mammal-service
servers:
  - url: http://localhost:8080
    description: Generated server url
security:
  - api-key: []
paths:
  "/api/v1/mammals":
    post:
      tags:
        - mammal-controller
      summary: Create Mammal APIs.
      operationId: createMammal
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/CreateMammalRequest"
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/MammalCreated"
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/MammalCreateFailure"
components:
  schemas:
    MammalType:
      type: string
      enum:
        - DOG
        - COW
    CreateDog:
      required:
        - mammalType
        - doesBark
      type: object
      allOf:
        - "$ref": "#/components/schemas/CreateMammal"
        - type: object
          properties:
            doesBark:
              type: boolean
    CreateCow:
      required:
        - mammalType
        - doesTip
      type: object
      allOf:
        - "$ref": "#/components/schemas/CreateMammal"
        - type: object
          properties:
            doesTip:
              type: boolean
              description: If you can push it at night and it tips over.
    CreateMammal:
      required:
        - mammalType
      type: object
      properties:
        mammalType:
          "$ref": "#/components/schemas/MammalType"
      description: Mammal Creation Parent Object.
      discriminator:
        propertyName: mammalType
    CreateMammalRequest:
      required:
        - createMammal
        - requestId
        - skipLockValidation
      type: object
      properties:
        createMammal:
          oneOf:
            - "$ref": "#/components/schemas/CreateDog"
            - "$ref": "#/components/schemas/CreateCow"
        requestId:
          type: string
          format: uuid
    MammalCreateFailure:
      required:
        - error
      type: object
      properties:
        error:
          type: string
    MammalCreated:
      required:
        - message
      type: object
      properties:
        message:
          type: string
  securitySchemes:
    api-key:
      type: apiKey
      name: api-key
      in: header
